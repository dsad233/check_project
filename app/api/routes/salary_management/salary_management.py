from datetime import datetime
from typing import List
from fastapi import APIRouter, Query

from app.api.routes.salary_management.dto.entire_salary_info_response_dto import EntireSalaryInfoResponseDTO


router = APIRouter()


@router.get("/{branch_id}/salary-management")
async def get_salary_management(branch_id: int, part_id: int = Query(None), year: int = Query(datetime.now().year), month: int = Query(datetime.now().month)) -> List[EntireSalaryInfoResponseDTO]:
    return [
        EntireSalaryInfoResponseDTO(
            id=1,
            user_id=101,
            part_name="개발팀",
            hire_date=datetime(2020, 1, 15).date(),
            resignation_date=None,
            monthly_salary=3500000,
            base_salary=2800000,
            fixed_overtime_allowance=200000,
            annual_leave_allowance=150000,
            holiday_allowance=100000,
            duty_allowance=200000,
            insentive_allowance=300000,
            overtime_allowance=150000,
            weekend_work_allowance=100000,
            etc_allowance=50000,
            meal_allowance=100000,
            vehicle_maintenance_allowance=200000,
            unused_annual_leave_allowance={"count": 5, "daily_salary": 100000, "total_amount": 500000},
            attendance_deduction=0,
            previous_month_unpaid=0,
            total_salary=4550000,
            hourly_wage=16827
        ),
        EntireSalaryInfoResponseDTO(
            id=2, 
            user_id=102,
            part_name="인사팀",
            hire_date=datetime(2019, 3, 1).date(),
            resignation_date=None,
            monthly_salary=4000000,
            base_salary=3200000,
            fixed_overtime_allowance=250000,
            annual_leave_allowance=180000,
            holiday_allowance=120000,
            duty_allowance=250000,
            insentive_allowance=400000,
            overtime_allowance=200000,
            weekend_work_allowance=150000,
            etc_allowance=80000,
            meal_allowance=100000,
            vehicle_maintenance_allowance=200000,
            unused_annual_leave_allowance={"count": 3, "daily_salary": 120000, "total_amount": 360000},
            attendance_deduction=50000,
            previous_month_unpaid=0,
            total_salary=4940000,
            hourly_wage=19231
        ),
        EntireSalaryInfoResponseDTO(
            id=3,
            user_id=103,
            part_name="영업팀",
            hire_date=datetime(2021, 6, 1).date(),
            resignation_date=None,
            monthly_salary=3800000,
            base_salary=3000000,
            fixed_overtime_allowance=220000,
            annual_leave_allowance=160000,
            holiday_allowance=110000,
            duty_allowance=220000,
            insentive_allowance=500000,
            overtime_allowance=180000,
            weekend_work_allowance=130000,
            etc_allowance=60000,
            meal_allowance=100000,
            vehicle_maintenance_allowance=200000,
            unused_annual_leave_allowance={"count": 7, "daily_salary": 110000, "total_amount": 770000},
            attendance_deduction=0,
            previous_month_unpaid=100000,
            total_salary=4580000,
            hourly_wage=18269
        ),
        EntireSalaryInfoResponseDTO(
            id=4,
            user_id=104,
            part_name="마케팅팀",
            hire_date=datetime(2022, 1, 10).date(),
            resignation_date=None,
            monthly_salary=3300000,
            base_salary=2600000,
            fixed_overtime_allowance=180000,
            annual_leave_allowance=140000,
            holiday_allowance=90000,
            duty_allowance=180000,
            insentive_allowance=250000,
            overtime_allowance=130000,
            weekend_work_allowance=80000,
            etc_allowance=40000,
            meal_allowance=100000,
            vehicle_maintenance_allowance=200000,
            unused_annual_leave_allowance={"count": 4, "daily_salary": 90000, "total_amount": 360000},
            attendance_deduction=30000,
            previous_month_unpaid=0,
            total_salary=3690000,
            hourly_wage=15865
        ),
        EntireSalaryInfoResponseDTO(
            id=5,
            user_id=105,
            part_name="디자인팀",
            hire_date=datetime(2020, 8, 15).date(),
            resignation_date=None,
            monthly_salary=3600000,
            base_salary=2900000,
            fixed_overtime_allowance=210000,
            annual_leave_allowance=155000,
            holiday_allowance=105000,
            duty_allowance=210000,
            insentive_allowance=320000,
            overtime_allowance=160000,
            weekend_work_allowance=110000,
            etc_allowance=55000,
            meal_allowance=100000,
            vehicle_maintenance_allowance=200000,
            unused_annual_leave_allowance={"count": 6, "daily_salary": 105000, "total_amount": 630000},
            attendance_deduction=0,
            previous_month_unpaid=0,
            total_salary=4825000,
            hourly_wage=17308
        )
    ]
